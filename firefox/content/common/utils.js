/* Copyright 2011 WebMynd Corp. All rights reserved. */
(function(c,b){var a="2b74ff14-7256-42e0-9bf1-0806eec78788";var c=c||window;var b=b||document;window=c;window.webmynd=window.webmynd||{};window.webmynd[a]=window.webmynd[a]||{};window.webmynd[a].utils={__sendRequestWrapper:function(e,d){if(typeof(d)!=="undefined"){window.webmynd[a].services.sendRequest(e,d)}else{window.webmynd[a].services.sendRequest(e)}},getPrefs:function(e,d){this.__sendRequestWrapper({header:{type:"GetPrefs"},names:e},d)},setPrefs:function(d){this.__sendRequestWrapper({header:{type:"SetPrefs"},pairs:d})},prefKeys:function(d){this.__sendRequestWrapper({header:{type:"Prefs-Keys"}},d)},prefClear:function(e,d){this.__sendRequestWrapper({header:{type:"Prefs-Clear"},names:e},d)},prefClearAll:function(d){this.__sendRequestWrapper({header:{type:"Prefs-ClearAll"}},d)},getUrl:function(d,e){this.__sendRequestWrapper({header:{type:"GetUrl"},url:d},e)},openWindow:function(e,d,f){this.__sendRequestWrapper({header:{type:"OpenWindow"},url:e,name:d,specs:f})},doAjax:function(e,d){this.__sendRequestWrapper({header:{type:"DoAjax"},options:e},d)},broadcast:function(e,d){var f=window.webmynd[a].services.connect({name:"broadcast"});d&&f.onMessage.addListener(function(g){d(g)});f.postMessage({header:{type:"Broadcast"},body:e})},broadcastBackground:function(e,d){var f=window.webmynd[a].services.connect({name:"broadcast-priv"});d&&f.onMessage.addListener(function(g){d(g)});f.postMessage({header:{type:"BroadcastPriv"},body:e})},button:{setIcon:function(d){window.webmynd[a].services.sendRequest({header:{type:"Button-SetIcon"},options:d})},setUrl:function(d){window.webmynd[a].services.sendRequest({header:{type:"Button-SetUrl"},options:d})}},completeLinks:function(d){var e=function(f){var g=new RegExp(f);return g.test(d)};if(["^http://.*","^https://.*","^resource://.*","^safari-extension://.*","^chrome.*"].some(e)){return d}else{return window.webmynd[a].services.getURL(d)}}};window.webmynd[a].broadcast={init:function(){var d={broadcast:function(g,e){var f=window.webmynd[a].$('<a class="listenResponse"></a>',b);f.text(JSON.stringify(g.body));window.webmynd[a].view.commsNode().append(f);window.webmynd[a].view.handleClick(f.get(0),".listenResponseResponse",false,function(i){var h=JSON.parse(window.webmynd[a].$(i.target,b).text());e(h.response)});window.webmynd[a].view.click(f.get(0))}};window.webmynd[a].services.onRequest.addListener(function(g,f,e){if(g.header&&(g.header.type==="Broadcast"||g.header.type==="ToFocussed")){d.broadcast(g,e)}})}};window.webmynd[a].pageTools={aznLink:function(h,i){var d={"default":{tag:"webmynd-20",domain:"www.amazon.com"},FR:{tag:"web07c-21",domain:"www.amazon.fr"},CA:{tag:"web0d1-20",domain:"www.amazon.ca"},DE:{tag:"web02a-21",domain:"www.amazon.de"},IT:{tag:"web055-21",domain:"www.amazon.it"},GB:{tag:"web000e-21",domain:"www.amazon.co.uk"}};var g=function(k){var m="/gp/redirect.html?",o=d[i],j=d["default"].tag,l=d["default"].domain;if(o&&o.tag&&o.domain){j=o.tag;l=o.domain}var n={camp:"1789",creative:"9325",tag:j,location:k,ie:"UTF8",linkCode:"ur2"};return"http://"+l+m+window.webmynd[a].$.param(n)};for(var f in d){var e=window.webmynd[a].$(h).attr("href");if(e&&e.indexOf("http://"+d[f].domain+"/")>=0){window.webmynd[a].$(h).attr("href",g(window.webmynd[a].$(h).attr("href")))}}},prepare:function(d,e){window.webmynd[a].$("a",d).each(function(){window.webmynd[a].pageTools.aznLink(this,e._wmCountry)})}}})(win,doc);