/* Copyright 2011 WebMynd Corp. All rights reserved. */
(function(){var a="2b74ff14-7256-42e0-9bf1-0806eec78788";window.webmynd=window.webmynd||{};window.webmynd[a]=window.webmynd[a]||{};window.webmynd[a].bg={};window.webmynd[a].onLoad=[];if(!JSON.stringify&&JSON.encode){JSON.stringify=JSON.encode}window.webmynd[a].api=window.webmynd[a].bg.api={getPage:function(c,b){window.webmynd[a].model.getUrl(c,b)},ajax:function(b){var c=function(){};b.success=b.success||c;b.error=b.error||c;window.webmynd[a].model.doAjax(b,function(d){if(d.success){try{var f=window.webmynd[a].$.parseJSON(d.data)}catch(g){try{var f=window.webmynd[a].$(d.data)}catch(g){var f=d.data}}b.success(f,d.textStatus)}else{b.error(d.textStatus,d.errorThrown)}})},getURL:function(b,c){if(c){c(window.webmynd[a].utils.completeLinks(b))}},openWindow:function(c,b,d){return window.webmynd[a].services.backgroundOpenUrl(c)},UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=Math.random()*16|0,b=e=="x"?d:(d&3|8);return b.toString(16)}).toUpperCase()},log:function(c,b){if(window.console!==undefined&&console.log){var d=c;if(b){d+="\n\tname:"+b.name+"\n\tmessage:"+b.message;if(b.fileName){d+="\n\tfile:"+b.fileName}if(b.lineNumber){d+="\n\tline:"+b.lineNumber}}console.log("["+a+"] "+d)}},button:{setIcon:function(b){window.webmynd[a].utils.button.setIcon({url:b})},setUrl:function(b){window.webmynd[a].utils.button.setUrl({url:b})},onClicked:{addListener:function(b){window.webmynd[a].services.button.onClicked.addListener(b)}}},prefs:{get:function(b,c){window.webmynd[a].model.getPrefs([b],function(d){if(c){return c(d[b])}})},set:function(b,d){var c={};c[b]=d;return window.webmynd[a].model.setPrefs(c)},keys:function(b){window.webmynd[a].model.prefs.keys(b)},clear:function(b,c){window.webmynd[a].model.prefs.clear([b],c)},clearAll:function(b){window.webmynd[a].model.prefs.clearAll(b)}},getPref:function(b,c){this.prefs.get(b,c)},setPref:function(b,c){this.prefs.set(b,c)},message:{listen:function(b,c){window.webmynd[a].services.onConnect.addListener(function(d){if(d.name==="broadcast-priv"){d.onMessage.addListener(function(g){var f=g.body;if(typeof b==="string"&&f.broadcastType===b){var e=c}else{if(typeof b==="function"){var e=b}}if(e){return e(f.content,function(h){d.postMessage(h)})}})}})},broadcast:function(b,c,d){window.webmynd[a].services.sendRequestToTabs({header:{type:"Broadcast"},body:{broadcastType:b,content:c}},function(e){if(d){d(e)}})},toFocussed:function(b,c,d){window.webmynd[a].services.sendRequestToFocussedTab({header:{type:"ToFocussed"},body:{broadcastType:b,content:c}},function(e){if(d){d(e)}})}},listen:function(b,c){this.message.listen(b,c)},broadcast:function(b,c,d){this.message.broadcast(b,c,d)}}})();